<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<script src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
<th:block
	th:replace="~{./include/layout :: layout(~{:: .main-wrapper})}">

	<div class="main-wrapper">
		<form name="actionForm" action="teamList" method="get">

			<input type="hidden" name="teamStatus" value="">

			<div class="search-container">
					<div class="search-category">
						<select id="category">
							<option value = "defaultsearch">전체검색</option>
							<option value="teamName">팀명</option>
							<option value="teamGoal">팀목표</option>
							<option value="userEmail">팀생성자</option>
						</select>
					</div>
				<div class="search-box">
					<input type="text" placeholder="검색어를 입력하세요" name="keyword">
					<button class="btn-search" type="submit">검색</button>
				</div>
			</div>

			<table>

				<div>
					<select id="handleAmount">
						<option value='' th:selected=" ${ pageVO.cri.teamStatus == ''}">전체</option>
						<option value="Y" th:selected=" ${ pageVO.cri.teamStatus == 'Y'}">진행중</option>
						<option value="N" th:selected=" ${ pageVO.cri.teamStatus == 'N'}">종료된
							팀</option>
					</select>
				</div>

				<thead>
					<tr>
						<th>NO.</th>
						<th>팀명</th>
						<th>팀목표</th>
						<th>팀인원</th>
						<th>팀 생성일</th>
						<th>팀 생성자</th>
						<th>팀 상태</th>
					</tr>
				</thead>
				<tbody class="tablebodys">
					<tr class="trbodys" th:each=" vo, status : ${list}">
						<td>[[${vo.teamNo}]]</td>
						<td>[[${vo.teamName}]]</td>
						<td>[[${vo.teamGoal}]]</td>
						<td></td>
						<td>[[${ #temporals.format(vo.teamRegdate,'yyyy-MM-dd')}]]</td>
						<td>[[${vo.userEmail}]]</td>
						<td>[[${vo.teamStatus== 'Y' ? '진행중' : '종료된 팀' }]]</td>
					</tr>
				</tbody>

			</table>

			<div class="page">
				<ul>
					<li><a><i class="fa fa-angle-double-left"
							aria-hidden="true"></i></a></li>
					<li style="margin-right: 5px;" th:if=${pageVO.prev}><a><i
							class="fa fa-angle-left" aria-hidden="true"></i></a></li>

					<th:block th:each=" page : ${pageVO.pageList}">
						<li th:class="${page == pageVO.page ? 'on' : ''}"><a
							th:href="@{teamList(page=${page}, amount=${pageVO.amount},
							teamStatus = ${pageVO.cri.teamStatus},
							category = ${pageVO.cri.category},
							keyword = ${pageVO.cri.keyword})}
							">[[${page}]]</a></li>
					</th:block>

					<li style="margin-left: 5px;" th:if=${pageVO.next}><a><i
							class="fa fa-angle-right" aria-hidden="true"></i></a></li>
					<li><a
						th:href="@{teamList(page=${pageVO.realEnd}, amount=${pageVO.amount})}"><i
							class="fa fa-angle-double-right" aria-hidden="true"></i></a></li>
				</ul>
			</div>

		</form>
</th:block>

<script>
	var handleAmount = document.getElementById("handleAmount");
	handleAmount.onchange = function(e) {
		// hidden input의 값을 변경
		var hiddenInput = document.querySelector("input[name=teamStatus]");
		hiddenInput.value = this.value;

		// form 제출
		var form = document.querySelector("form[name=actionForm]");
		form.submit();
	}
</script>

<!-- <script>

	function statusCheck(obj){
		var selval = $(obj).val();
		console.log(selval);
		$.ajax({
			
			url: "/listFilter",
            type: "post",
            data: {
            	 selval: selval
            },
            success: function(result) {
                console.log(result);
             
            	var str = "";
             for(var i = 0; i<result.length; i++){
            	str += "<tr class = 'trbodys'>";
				str +=	 '<td>' + result[i].teamNo + '</td>';
				str +=	 '<td>' + result[i].teamName + '</td>';
				str +=	 '<td>' + result[i].teamGoal + '</td>';
				str +=	 '<td>' + + '</td>';
				str +=	 '<td>' + result[i].teamRegdate + '</td>';
				str +=	 '<td>' + result[i].userEmail + '</td>';
				str +=	 '<td>' + (result[i].teamStatus == 'Y' ? '진행중' : '종료된 팀')  + '</td>';
				str += "</tr>";
             }
            	 $(".trbodys").remove();
				$(".tablebodys").append(str);
                
            }, error: function(err){
            	console.log("에러");
            }
		})
		
	}
	
</script> -->

<link rel="stylesheet" href="../css/TeamList.css">